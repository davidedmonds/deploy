{"version":3,"sources":["app/components/App.jsx","app/components/Footer.jsx","app/components/Menu.jsx","app/components/Pipelines.jsx","app/components/Routes.jsx","app/components/StageForm.jsx","app/components/StageVisualiser.jsx","app/components/WebsocketIndicator.jsx","app/constants/DeployConstants.js","app/dispatcher/DeployDispatcher.js","app/initialize.js","app/pages/EditPipeline.jsx","app/pages/Overview.jsx","app/stores/PipelineStore.js"],"names":[],"mappings":"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","file":"public/js/app.js","sourcesContent":["//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport React from 'react';\r\nimport Container from 'muicss/lib/react/container';\r\n\r\nimport Menu from './Menu'\r\nimport Footer from './Footer'\r\nimport Overview from '../pages/Overview'\r\n\r\nexport default class App extends React.Component {\r\n  render() {\r\n    return (\r\n      <div id=\"content\">\r\n        <Menu />\r\n        <div className=\"mui--appbar-min-height\">&nbsp;</div>\r\n        <Container fluid={true}>\r\n          {this.props.children}\r\n        </Container>\r\n        <Container fluid={true}>\r\n          <Footer />\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport React from 'react';\r\n\r\nexport default class Footer extends React.Component {\r\n  render() {\r\n    return (\r\n      <footer>\r\n        Deploy v1. <a href=\"https://github.com/davidedmonds/deploy\">Source on Github</a>\r\n      </footer>\r\n    );\r\n  }\r\n}\r\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport React from 'react';\r\nimport Appbar from 'muicss/lib/react/appbar';\r\nimport WebsocketIndicator from './WebsocketIndicator'\r\n\r\nexport default class Menu extends React.Component {\r\n  render() {\r\n    return (\r\n      <Appbar>\r\n        <nav className=\"mui--text-title\">\r\n          <span className=\"mui--appbar-line-height\">=</span>\r\n          <ul className=\"mui--appbar-line-height mui-list--inline\">\r\n            <li>Deploy</li>\r\n            <li>Home</li>\r\n          </ul>\r\n          <WebsocketIndicator />\r\n        </nav>\r\n      </Appbar>\r\n    );\r\n  }\r\n}\r\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport React from 'react';\r\nimport { Container as FluxContainer } from 'flux/utils';\r\nimport { Link } from 'react-router';\r\nimport Button from 'muicss/lib/react/button';\r\nimport Panel from 'muicss/lib/react/panel';\r\nimport Container from 'muicss/lib/react/container';\r\nimport Row from 'muicss/lib/react/row';\r\nimport Col from 'muicss/lib/react/col';\r\n\r\nimport PipelineStore from '../stores/PipelineStore'\r\nimport StageVisualiser from '../components/StageVisualiser'\r\n\r\nclass Pipelines extends React.Component {\r\n  static getStores() {\r\n    return [PipelineStore]\r\n  }\r\n\r\n  static calculateState(prevState) {\r\n    return {\r\n      pipelines: PipelineStore.getState()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>{\r\n        this.state.pipelines.map((pipeline, idx) => {\r\n          return (\r\n            <Panel key={idx}>\r\n              <Container fluid={true}>\r\n                <Row>\r\n                  <Col md=\"6\"><h2>{pipeline.name}</h2></Col>\r\n                  <Col md=\"6\"><h2 className=\"version\">{pipeline.version}</h2></Col>\r\n                </Row>\r\n              </Container>\r\n              <hr/>\r\n              <StageVisualiser stages={pipeline.stages} />\r\n              <hr/>\r\n              <Link to={\"/pipeline/edit/\" + pipeline.name}>\r\n                <Button color=\"primary\">Edit Pipeline</Button>\r\n              </Link>\r\n            </Panel>\r\n          )\r\n        })\r\n      }</div>\r\n    )\r\n  }\r\n}\r\n\r\nconst PipelinesContainer = FluxContainer.create(Pipelines)\r\nexport default PipelinesContainer\r\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport React from 'react';\r\nimport App from 'components/App';\r\nimport Overview from 'pages/Overview'\r\nimport EditPipeline from 'pages/EditPipeline'\r\nimport { Router, Route, IndexRoute, browserHistory } from 'react-router'\r\n\r\nexport default class Routes extends React.Component {\r\n  render() {\r\n    return (\r\n      <Router history={browserHistory}>\r\n        <Route path=\"/\" component={App}>\r\n          <IndexRoute component={Overview} />\r\n          <Route path=\"pipeline/edit/:name\" component={EditPipeline} />\r\n        </Route>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport React from 'react';\r\nimport Input from 'muicss/lib/react/input';\r\nimport Panel from 'muicss/lib/react/panel';\r\n\r\nexport default class StageForm extends React.Component {\r\n  render() {\r\n    return (\r\n      <Panel>\r\n        <Input required=\"required\"\r\n               label=\"Stage Name\"\r\n               defaultValue={this.props.stage.name}\r\n               onChange={this.handleNameChange} />\r\n      </Panel>\r\n    )\r\n  }\r\n}\r\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport React from 'react';\r\n\r\nexport default class StageVisualiser extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"stage-vis\">\r\n        <svg width=\"100%\" height=\"100%\">\r\n          {/* TODO extract this filter */}\r\n          <filter id=\"dropShadow\" width=\"150%\" height=\"150%\">\r\n            {/* General Glow */}\r\n            <feComponentTransfer in=\"SourceAlpha\">\r\n              <feFuncA type=\"linear\" slope=\"0.2\"/>\r\n            </feComponentTransfer>\r\n            <feGaussianBlur stdDeviation=\"2\" out=\"GeneralGlow\"/>\r\n            {/* Main shadow */}\r\n            <feOffset in=\"SourceAlpha\" dx=\"0\" dy=\"2\"/>\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"linear\" slope=\"0.2\"/>\r\n            </feComponentTransfer>\r\n            <feGaussianBlur stdDeviation=\"2\" out=\"MainShadow\"/>\r\n            <feMerge>\r\n              <feMergeNode in=\"GeneralGlow\"/>\r\n              <feMergeNode in=\"MainShadow\"/>\r\n              <feMergeNode in=\"SourceGraphic\"/>\r\n            </feMerge>\r\n          </filter>\r\n          {this.props.stages.map((stage, idx) => {\r\n            return (<g key={idx}>\r\n              <rect x={10 + (idx * 150)} y=\"10\" width=\"130\" height=\"30\" fill=\"#fff\" filter=\"url(#dropShadow)\"/>\r\n              <text x={75 + (idx * 150)} y=\"30\" textAnchor=\"middle\">{stage.name}</text>\r\n            </g>)\r\n          })}\r\n        </svg>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport React from 'react';\r\nimport DeployDispatcher from '../dispatcher/DeployDispatcher'\r\n\r\nexport default class WebsocketIndicator extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {connected: false}\r\n  }\r\n\r\n  componentDidMount() {\r\n    //TODO move this into a store eventually\r\n    var websocket = new WebSocket(\"ws://localhost:54321/client\")\r\n    \r\n    websocket.onopen = event => {\r\n      this.setState({connected: true})\r\n    };\r\n    websocket.onmessage = event => {\r\n      console.log(event.data)\r\n      DeployDispatcher.handleViewAction(JSON.parse(event.data))\r\n    }\r\n    websocket.onerror = () => {\r\n      console.log(arguments);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <span className=\"mui--appbar-line-height\">\r\n        {this.state.connected ? \"Connected\" : \"Disconnected\" }\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","export const CompleteState = \"completeState\"\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport { Dispatcher } from 'flux';\r\n\r\nclass DeployDispatcher extends Dispatcher {\r\n  handleViewAction(action) {\r\n    this.dispatch({\r\n      source: \"VIEW_ACTION\",\r\n      action: action\r\n    })\r\n  }\r\n}\r\n\r\nconst instance = new DeployDispatcher()\r\nexport default instance\r\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport { render } from 'react-dom';\r\nimport React from 'react';\r\nimport Routes from 'components/Routes'\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  render((<Routes />), document.querySelector('#app'))\r\n});\r\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport React from 'react';\r\n\r\nimport Button from 'muicss/lib/react/button';\r\nimport Form from 'muicss/lib/react/form';\r\nimport Input from 'muicss/lib/react/input';\r\nimport Panel from 'muicss/lib/react/panel';\r\n\r\nimport { Container } from 'flux/utils';\r\n\r\nimport PipelineStore from '../stores/PipelineStore'\r\nimport Pipelines from '../components/Pipelines'\r\nimport StageForm from '../components/StageForm'\r\n\r\nclass EditPipeline extends React.Component {\r\n  static getStores() {\r\n    return [PipelineStore]\r\n  }\r\n\r\n  static calculateState(prevState, props) {\r\n    return {\r\n      pipeline: PipelineStore.getPipeline(props.params.name)\r\n    }\r\n  }\r\n\r\n  addStage(e) {\r\n    e.preventDefault();\r\n    this.setState({stages: this.state.pipeline.stages.concat([{}])})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Panel>\r\n        <Form>\r\n          <Input required=\"required\"\r\n                 label=\"Pipeline Name\"\r\n                 defaultValue={this.state.pipeline.name || this.props.params.name} />\r\n           <div id=\"stages\">{this.state.pipeline.stages.map(function(stage, idx) {\r\n             return (\r\n               <StageForm stage={stage} key={idx} />\r\n             )\r\n           }.bind(this))}</div>\r\n           <Button color=\"primary\" onClick={this.addStage.bind(this)}>\r\n             Add Stage\r\n           </Button>\r\n          <hr/>\r\n          <Button color=\"primary\">Save Pipeline</Button>\r\n        </Form>\r\n      </Panel>\r\n    );\r\n  }\r\n}\r\n\r\nconst EditPipelineContainer = Container.create(EditPipeline, {pure: false, withProps: true})\r\nexport default EditPipelineContainer\r\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport React from 'react';\r\nimport Button from 'muicss/lib/react/button';\r\nimport Pipelines from '../components/Pipelines'\r\n\r\nexport default class Overview extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Pipelines />\r\n        <div className=\"action\">\r\n          <Button variant=\"fab\" color=\"accent\">+</Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","//\n// Deploy - Continuous Delivery, Faster\r\n// Copyright (C) 2016 by David Edmonds\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n//\r\n\r\nimport { ReduceStore } from 'flux/utils'\r\nimport { CompleteState } from '../constants/DeployConstants'\r\nimport DeployDispatcher from '../dispatcher/DeployDispatcher'\r\n\r\nvar CHANGE_EVENT = \"change\"\r\n\r\nclass PipelineStore extends ReduceStore<Array> {\r\n  getInitialState() {\r\n    return [];\r\n  }\r\n\r\n  getPipeline(name) {\r\n    //TODO if performance requires, make this store a map and lookup here instead\r\n    return this._state.filter((pipeline) => {\r\n      return pipeline.name === name\r\n    })[0] || {stages: []};\r\n  }\r\n\r\n  reduce(state, action) {\r\n    switch (action.action.type) {\r\n      case CompleteState:\r\n        return action.action.payload.pipelines;\r\n      default:\r\n        console.log(\"Recieved Unhandled Action\", action)\r\n        return state;\r\n    }\r\n  }\r\n}\r\n\r\nconst instance = new PipelineStore(DeployDispatcher);\r\nexport default instance;\r\n"]}